<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Unit tests | Introduction to Vue.js</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Discover Vue.js framework through this 2-days training">
    
    <link rel="preload" href="/vuejs-training/assets/css/0.styles.bc0ba21a.css" as="style"><link rel="preload" href="/vuejs-training/assets/js/app.1ac87feb.js" as="script"><link rel="preload" href="/vuejs-training/assets/js/3.9c71ca5a.js" as="script"><link rel="preload" href="/vuejs-training/assets/js/40.79aa6197.js" as="script"><link rel="prefetch" href="/vuejs-training/assets/js/10.40b6cec4.js"><link rel="prefetch" href="/vuejs-training/assets/js/11.ed8f8aa4.js"><link rel="prefetch" href="/vuejs-training/assets/js/12.587a396a.js"><link rel="prefetch" href="/vuejs-training/assets/js/13.39ef95d5.js"><link rel="prefetch" href="/vuejs-training/assets/js/14.4392fcc5.js"><link rel="prefetch" href="/vuejs-training/assets/js/15.b5bb4985.js"><link rel="prefetch" href="/vuejs-training/assets/js/16.23f8c53b.js"><link rel="prefetch" href="/vuejs-training/assets/js/17.1372593b.js"><link rel="prefetch" href="/vuejs-training/assets/js/18.0206bbdd.js"><link rel="prefetch" href="/vuejs-training/assets/js/19.03f5159e.js"><link rel="prefetch" href="/vuejs-training/assets/js/2.7b4135f7.js"><link rel="prefetch" href="/vuejs-training/assets/js/20.46052103.js"><link rel="prefetch" href="/vuejs-training/assets/js/21.2a1dc9b0.js"><link rel="prefetch" href="/vuejs-training/assets/js/22.509f8821.js"><link rel="prefetch" href="/vuejs-training/assets/js/23.3703f9a3.js"><link rel="prefetch" href="/vuejs-training/assets/js/24.61af4414.js"><link rel="prefetch" href="/vuejs-training/assets/js/25.873be683.js"><link rel="prefetch" href="/vuejs-training/assets/js/26.5beca49b.js"><link rel="prefetch" href="/vuejs-training/assets/js/27.ac1acf86.js"><link rel="prefetch" href="/vuejs-training/assets/js/28.f2e51b80.js"><link rel="prefetch" href="/vuejs-training/assets/js/29.b3b2815b.js"><link rel="prefetch" href="/vuejs-training/assets/js/30.09bea011.js"><link rel="prefetch" href="/vuejs-training/assets/js/31.68cba608.js"><link rel="prefetch" href="/vuejs-training/assets/js/32.7797136c.js"><link rel="prefetch" href="/vuejs-training/assets/js/33.47734303.js"><link rel="prefetch" href="/vuejs-training/assets/js/34.30a311fe.js"><link rel="prefetch" href="/vuejs-training/assets/js/35.0ed18b8d.js"><link rel="prefetch" href="/vuejs-training/assets/js/36.8090ec62.js"><link rel="prefetch" href="/vuejs-training/assets/js/37.2de0af54.js"><link rel="prefetch" href="/vuejs-training/assets/js/38.5dd82804.js"><link rel="prefetch" href="/vuejs-training/assets/js/39.db5e8b56.js"><link rel="prefetch" href="/vuejs-training/assets/js/4.3340eb74.js"><link rel="prefetch" href="/vuejs-training/assets/js/41.76a2fbb8.js"><link rel="prefetch" href="/vuejs-training/assets/js/42.76d6f69c.js"><link rel="prefetch" href="/vuejs-training/assets/js/5.acaff3c9.js"><link rel="prefetch" href="/vuejs-training/assets/js/6.69994d5d.js"><link rel="prefetch" href="/vuejs-training/assets/js/7.4d297742.js"><link rel="prefetch" href="/vuejs-training/assets/js/8.9aa2b887.js"><link rel="prefetch" href="/vuejs-training/assets/js/9.69e978a7.js">
    <link rel="stylesheet" href="/vuejs-training/assets/css/0.styles.bc0ba21a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuejs-training/" class="home-link router-link-active"><!----> <span class="site-name">Introduction to Vue.js</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Language</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuejs-training/tests/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/vuejs-training/fr/tests/" class="nav-link">
  Français
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Language</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuejs-training/tests/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/vuejs-training/fr/tests/" class="nav-link">
  Français
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vuejs-training/" aria-current="page" class="sidebar-link">Welcome</a></li><li><a href="/vuejs-training/presentation/" class="sidebar-link">Presentation of Vue.js</a></li><li><a href="/vuejs-training/tooling/" class="sidebar-link">Tooling</a></li><li><a href="/vuejs-training/views/" class="sidebar-link">Vue files</a></li><li><a href="/vuejs-training/directives/" class="sidebar-link">Directives</a></li><li><a href="/vuejs-training/components/" class="sidebar-link">Components</a></li><li><a href="/vuejs-training/reactivity/" class="sidebar-link">Reactivity</a></li><li><a href="/vuejs-training/state/" class="sidebar-link">State management</a></li><li><a href="/vuejs-training/routing/" class="sidebar-link">Routing</a></li><li><a href="/vuejs-training/http/" class="sidebar-link">HTTP Requests</a></li><li><a href="/vuejs-training/tests/" aria-current="page" class="active sidebar-link">Unit tests</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuejs-training/tests/#why-should-i-write-automated-tests" class="sidebar-link">Why should I write automated tests ?</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/tests/#different-types-of-automated-tests" class="sidebar-link">Different types of automated tests</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/tests/#choose-your-test-runner" class="sidebar-link">Choose your test runner</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/tests/#vue-test-utils" class="sidebar-link">Vue Test Utils</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/tests/#write-your-first-test-with-vitest-and-vue-test-utils" class="sidebar-link">Write your first test with Vitest and Vue Test Utils</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/tests/#mocking" class="sidebar-link">Mocking</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/tests/#practical-work-test-the-film-component" class="sidebar-link">Practical work: Test the Film component</a></li></ul></li><li><a href="/vuejs-training/reusability/" class="sidebar-link">Reusability and composition</a></li><li><a href="/vuejs-training/ecosystem/" class="sidebar-link">Vue Ecosystem</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="unit-tests"><a href="#unit-tests" class="header-anchor">#</a> Unit tests</h1> <h2 id="why-should-i-write-automated-tests"><a href="#why-should-i-write-automated-tests" class="header-anchor">#</a> Why should I write automated tests ?</h2> <p>Automated testing is an essential step in software development, and bring many benefits:</p> <ul><li>document how a component should behave</li> <li>detect and fix bugs sooner and more effectively</li> <li>save time spent manually testing</li> <li>encourage refactoring with complete peace of mind</li></ul> <h2 id="different-types-of-automated-tests"><a href="#different-types-of-automated-tests" class="header-anchor">#</a> Different types of automated tests</h2> <ul><li><strong>Unit</strong>: Checks that inputs to a given function, class, or composable are producing the expected output or side effects.</li> <li><strong>Component</strong>: Checks that your component mounts, renders, can be interacted with, and behaves as expected. These tests import more code than unit tests, are more complex, and require more time to execute.</li> <li><strong>End-to-end</strong>: Checks features that span multiple pages and make real network requests against your production-built Vue application. These tests often involve standing up a database or other backend.</li></ul> <h2 id="choose-your-test-runner"><a href="#choose-your-test-runner" class="header-anchor">#</a> Choose your test runner</h2> <p>In order to test your application, you will need a test runner which will launch your test and collect the results. Vue team recommends <a href="https://vitest.dev/" target="_blank" rel="noopener noreferrer"><code>Vitest</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for unit tests and simple components (no interaction), and <a href="https://on.cypress.io/component" target="_blank" rel="noopener noreferrer"><code>Cypress</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>  for more complex components and end-to-end testing.</p> <p>The main difference between these two is execution context and execution time. Cypress runs tests in a real browser, which let you find some issues that Vitest can't spot: CSS issues, DOM events, failed network requests...</p> <p>Vitest and Cypress should be already installed on your project if you followed the project init instructions correctly.</p> <p>For more information and alternative tooling, please check <a href="https://vuejs.org/guide/scaling-up/testing.html" target="_blank" rel="noopener noreferrer">official documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="vue-test-utils"><a href="#vue-test-utils" class="header-anchor">#</a> Vue Test Utils</h2> <p>To make it easier to write tests for Vue components, the team also provides <a href="https://vue-test-utils.vuejs.org/" target="_blank" rel="noopener noreferrer">Vue Test Utils<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, the official library of unit test utilities for Vue.js. It comes with a <a href="https://vue-test-utils.vuejs.org/" target="_blank" rel="noopener noreferrer">detailed guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to help you set up your tests with custom configurations.</p> <p>This library offers an API to test the Vue components, here are some of the most used methods:</p> <ul><li><code>mount</code>: creates a <code>Wrapper</code> that contains the mounted and rendered Vue component;</li> <li><code>shallowMount</code>: like <code>mount</code>, it creates a <code>Wrapper</code> that contains the mounted and rendered Vue component, but with stubbed child components;</li></ul> <p>The class <code>Wrapper</code> representing your mounted component offers method such as:</p> <ul><li><code>.html()</code>, <code>.text()</code>: get the HTML or text content</li> <li><code>.find()</code>, <code>.findAll()</code>: search for HTML in the component</li> <li><code>.setData()</code>, <code>.setMethods()</code>, <code>.setProps()</code>: override options in your component</li> <li><code>.trigger()</code>: trigger events</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The methods described above make it possible to test most simple cases. For more information refer to the <a href="https://vue-test-utils.vuejs.org/" target="_blank" rel="noopener noreferrer">official documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <h2 id="write-your-first-test-with-vitest-and-vue-test-utils"><a href="#write-your-first-test-with-vitest-and-vue-test-utils" class="header-anchor">#</a> Write your first test with Vitest and Vue Test Utils</h2> <p>By default, Vitest will run all tests in a <code>tests / unit</code> or<code>__tests__</code> folder. For example, the tests in <code>Film.spec.js</code> and<code>LoginForm.spec.js</code> will be spotted and run by Vitest here:</p> <div class="language- extra-class"><pre class="language-text"><code>-- components
  |-- Film.vue
  |-- LoginForm.vue
  |-- __tests__
    |-- Film.spec.js
    |-- LoginForm.spec.js
</code></pre></div><p>Here is a basic example of what the tests of <code>LoginForm</code> could look like:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/test-utils'</span>
<span class="token keyword">import</span> LoginForm <span class="token keyword">from</span> <span class="token string">'../LoginForm.vue'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'render the form and check the title'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>LoginForm<span class="token punctuation">)</span>

  <span class="token keyword">const</span> title <span class="token operator">=</span> wrapper<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">)</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>title<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">'Authentication'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="mocking"><a href="#mocking" class="header-anchor">#</a> Mocking</h2> <p>The <strong>mocking</strong> consists of isolating the test subject by replacing it with a mockup that simulate all the external bricks it interacts with. Thus, in case of failure of the test, it is ensured that the problem comes from the tested function and not from an external component (network, databases, third party, etc.).</p> <p>Below are some examples to illustrate Vitest's mocking ability:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> test<span class="token punctuation">,</span> vi <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vitest'</span>

<span class="token comment">// Mocking a local function</span>
<span class="token keyword">import</span> ApiService <span class="token keyword">from</span> <span class="token string">'@/services/api.js'</span>
<span class="token keyword">import</span> FilmService <span class="token keyword">from</span> <span class="token string">'@/services/film.js'</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Film search returns no results'</span><span class="token punctuation">,</span> <span class="token parameter">done</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// mock the API to return a empty list</span>
    ApiService<span class="token punctuation">.</span>api <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    FilmService<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">&quot;something&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">results</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">expect</span><span class="token punctuation">(</span>results<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="practical-work-test-the-film-component"><a href="#practical-work-test-the-film-component" class="header-anchor">#</a> Practical work: Test the Film component</h2> <ol><li>Create a unit test spec file for your <code>Film.vue</code> component.</li> <li>In your test, mount the component, add a basic assertion, and run the tests.</li> <li>Simulate the values ​​of a film and check the HTML rendering.</li> <li>Add the calculation of the code coverage. What do you notice?</li> <li><strong>Bonus</strong>: Test the <code>LoginForm.vue</code> component, simulating HTTPS external calls as well as calls to the store and the router. Test the nominal and login error case.</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuejs-training/http/" class="prev">
        HTTP Requests
      </a></span> <span class="next"><a href="/vuejs-training/reusability/">
        Reusability and composition
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuejs-training/assets/js/app.1ac87feb.js" defer></script><script src="/vuejs-training/assets/js/3.9c71ca5a.js" defer></script><script src="/vuejs-training/assets/js/40.79aa6197.js" defer></script>
  </body>
</html>
