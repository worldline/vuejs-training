<!DOCTYPE html>
<html lang="fr-FR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Routage | Introduction à Vue.js</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Découvrez le framework Vue.js dans cette formation de 2 jours">
    
    <link rel="preload" href="/vuejs-training/assets/css/0.styles.bc0ba21a.css" as="style"><link rel="preload" href="/vuejs-training/assets/js/app.1ac87feb.js" as="script"><link rel="preload" href="/vuejs-training/assets/js/3.9c71ca5a.js" as="script"><link rel="preload" href="/vuejs-training/assets/js/36.8090ec62.js" as="script"><link rel="prefetch" href="/vuejs-training/assets/js/10.40b6cec4.js"><link rel="prefetch" href="/vuejs-training/assets/js/11.ed8f8aa4.js"><link rel="prefetch" href="/vuejs-training/assets/js/12.587a396a.js"><link rel="prefetch" href="/vuejs-training/assets/js/13.39ef95d5.js"><link rel="prefetch" href="/vuejs-training/assets/js/14.4392fcc5.js"><link rel="prefetch" href="/vuejs-training/assets/js/15.b5bb4985.js"><link rel="prefetch" href="/vuejs-training/assets/js/16.23f8c53b.js"><link rel="prefetch" href="/vuejs-training/assets/js/17.1372593b.js"><link rel="prefetch" href="/vuejs-training/assets/js/18.0206bbdd.js"><link rel="prefetch" href="/vuejs-training/assets/js/19.03f5159e.js"><link rel="prefetch" href="/vuejs-training/assets/js/2.7b4135f7.js"><link rel="prefetch" href="/vuejs-training/assets/js/20.46052103.js"><link rel="prefetch" href="/vuejs-training/assets/js/21.2a1dc9b0.js"><link rel="prefetch" href="/vuejs-training/assets/js/22.509f8821.js"><link rel="prefetch" href="/vuejs-training/assets/js/23.3703f9a3.js"><link rel="prefetch" href="/vuejs-training/assets/js/24.61af4414.js"><link rel="prefetch" href="/vuejs-training/assets/js/25.873be683.js"><link rel="prefetch" href="/vuejs-training/assets/js/26.5beca49b.js"><link rel="prefetch" href="/vuejs-training/assets/js/27.ac1acf86.js"><link rel="prefetch" href="/vuejs-training/assets/js/28.f2e51b80.js"><link rel="prefetch" href="/vuejs-training/assets/js/29.b3b2815b.js"><link rel="prefetch" href="/vuejs-training/assets/js/30.09bea011.js"><link rel="prefetch" href="/vuejs-training/assets/js/31.68cba608.js"><link rel="prefetch" href="/vuejs-training/assets/js/32.7797136c.js"><link rel="prefetch" href="/vuejs-training/assets/js/33.47734303.js"><link rel="prefetch" href="/vuejs-training/assets/js/34.30a311fe.js"><link rel="prefetch" href="/vuejs-training/assets/js/35.0ed18b8d.js"><link rel="prefetch" href="/vuejs-training/assets/js/37.2de0af54.js"><link rel="prefetch" href="/vuejs-training/assets/js/38.5dd82804.js"><link rel="prefetch" href="/vuejs-training/assets/js/39.db5e8b56.js"><link rel="prefetch" href="/vuejs-training/assets/js/4.3340eb74.js"><link rel="prefetch" href="/vuejs-training/assets/js/40.79aa6197.js"><link rel="prefetch" href="/vuejs-training/assets/js/41.76a2fbb8.js"><link rel="prefetch" href="/vuejs-training/assets/js/42.76d6f69c.js"><link rel="prefetch" href="/vuejs-training/assets/js/5.acaff3c9.js"><link rel="prefetch" href="/vuejs-training/assets/js/6.69994d5d.js"><link rel="prefetch" href="/vuejs-training/assets/js/7.4d297742.js"><link rel="prefetch" href="/vuejs-training/assets/js/8.9aa2b887.js"><link rel="prefetch" href="/vuejs-training/assets/js/9.69e978a7.js">
    <link rel="stylesheet" href="/vuejs-training/assets/css/0.styles.bc0ba21a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuejs-training/fr/" class="home-link router-link-active"><!----> <span class="site-name">Introduction à Vue.js</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Langue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Langue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuejs-training/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/vuejs-training/fr/routage/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Français
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Langue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Langue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuejs-training/" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/vuejs-training/fr/routage/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Français
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vuejs-training/fr/" aria-current="page" class="sidebar-link">Bienvenue</a></li><li><a href="/vuejs-training/fr/presentation/" class="sidebar-link">Présentation de Vue.js</a></li><li><a href="/vuejs-training/fr/outillage/" class="sidebar-link">Outillage</a></li><li><a href="/vuejs-training/fr/vues/" class="sidebar-link">Vues</a></li><li><a href="/vuejs-training/fr/directives/" class="sidebar-link">Directives</a></li><li><a href="/vuejs-training/fr/composants/" class="sidebar-link">Composants</a></li><li><a href="/vuejs-training/fr/reactivite/" class="sidebar-link">Réactivité</a></li><li><a href="/vuejs-training/fr/etat/" class="sidebar-link">Gestion d'état</a></li><li><a href="/vuejs-training/fr/routage/" aria-current="page" class="active sidebar-link">Routage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuejs-training/fr/routage/#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/fr/routage/#configuration-du-routeur" class="sidebar-link">Configuration du routeur</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/fr/routage/#navigation-et-router-link" class="sidebar-link">Navigation et router-link</a></li><li class="sidebar-sub-header"><a href="/vuejs-training/fr/routage/#tp-implementation-du-routeur" class="sidebar-link">TP: Implémentation du routeur</a></li></ul></li><li><a href="/vuejs-training/fr/http/" class="sidebar-link">Requêtes HTTP</a></li><li><a href="/vuejs-training/fr/tests/" class="sidebar-link">Tests automatisés</a></li><li><a href="/vuejs-training/fr/reutilisabilite/" class="sidebar-link">Réusabilité et composition</a></li><li><a href="/vuejs-training/fr/ecosysteme/" class="sidebar-link">Écosystème de Vue</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="routage"><a href="#routage" class="header-anchor">#</a> Routage</h1> <p>Les applications Vue sont la plupart du temps des Single Page Applications (SPA), c'est-à-dire que le serveur dessert toujours une seule et même page, et la navigation entre les pages est gérée côté client en JavaScript. Cette approche permet des transitions plus fluides entre pages, et de réduire le nombre d'appels nécessaires au serveur pour naviguer entre les pages. Cela s'avère essentiel pour les Progressive Web Apps ou les applications web souhaitant disposer de fonctionnalités offline.</p> <p>Le routage d'une SPA est donc géré côté client, et l'équipe de Vue fournit une bibliothèque à cet effet: <code>vue-router</code>. Ce routeur permet d'associer des routes (URL) à des composants Vue, et propose de nombreuses fonctionnalités :</p> <ul><li>Arborescence de routes</li> <li>Configuration modulaire basée sur les composants</li> <li>Gestion de paramètres dynamiques : path, query, wildcards...</li> <li>Intégration avec le système de transitions de Vue</li> <li>Deux modes de fonctionnement :
<ul><li>par <code>hash</code> (monsite.com/<strong>#</strong>/page1)</li> <li>ou par <code>history</code> (manipulation de l'historique en JS avec auto-fallback pour IE)</li></ul></li></ul> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <p>Si vous ne l'avez pas installé pendant la configuration initiale du projet, vous pouvez maintenant installer <code>vue-router</code> avec <code>npm</code>.</p> <p>Créez un dossier <code>src/router</code> et un fichier <code>router/index.js</code> qui contiendra la configuration du routeur. Le fichier <code>main.js</code> devra être modifié pour déclarer ce nouveau routeur dans l'application:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> vue-router
</code></pre></div><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">&quot;./router&quot;</span><span class="token punctuation">;</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="configuration-du-routeur"><a href="#configuration-du-routeur" class="header-anchor">#</a> Configuration du routeur</h2> <p>Le routeur est créé en prenant en paramètres un ensemble de routes. Chaque route associe un pattern d'URL à un certain composant. Au chargement de la page, ou à chaque changement d'URL, le routeur va résoudre quelle route est associée à cette nouvelle URL.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/** src/router/index.js **/</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">&quot;@/components/HelloWorld.vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/hello/:name&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> HelloWorld<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>
</code></pre></div><p>Une fois la résolution de la route terminée, un composant a été associé à l'URL en cours. Ce composant est alors injecté à la place de l'élément <code>&lt;router-view /&gt;</code>. Cet élément est généralement placé dans le composant racine <code>App.vue</code>. Les éléments autour de <code>&lt;router-view /&gt;</code> forment le layout structurant votre application : un header, une barre de navigation, un footer etc.</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Mon site web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>Made with Vue<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="navigation-et-router-link"><a href="#navigation-et-router-link" class="header-anchor">#</a> Navigation et router-link</h2> <p>Vue-router inclut un composant <code>&lt;router-link&gt;</code> déclaré globalement, qui peut se substituer aux balises <code>&lt;a&gt;</code> pour tout ce qui est navigation interne via ce routeur.</p> <p>L'avantage de ce composant par rapport aux balises classiques <code>&lt;a&gt;</code> est que les liens s'adaptent à votre configuration (hash ou history) et peuvent être statiques ou dynamiquement générés par des noms de route et des listes de paramètres :</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Page d'accueil<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ name: 'hello', params: { name: 'John' } }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Lien dynamique
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Le routeur dispose de méthodes pour naviguer programmatiquement entre les pages:</p> <div class="language-js extra-class"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// aller à page précédente</span>

<span class="token keyword">let</span> nextId <span class="token operator">=</span> router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// récupérer les paramètres d'URL</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/article/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>nextId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// naviguer vers une nouvelle page par URL</span>
</code></pre></div><p>Grâce au plugin routeur, vous pouvez facilement récupérer une référence au routeur depuis tous vos composants:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// depuis les options d'un composant</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">;</span> <span class="token comment">// pointe vers l'instance du routeur</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">;</span> <span class="token comment">// pointe vers router.currentRoute</span>
</code></pre></div><h2 id="tp-implementation-du-routeur"><a href="#tp-implementation-du-routeur" class="header-anchor">#</a> TP: Implémentation du routeur</h2> <ol><li><p>Si ce n'est pas déjà fait, installez vue-router sur votre projet en suivant les instructions ci-dessus. Ajoutez l'élément <code>&lt;router-view&gt;</code> dans <code>App.vue</code> puis créez le fichier <code>src/router/index.js</code> pour commencer à configurer les routes.</p></li> <li><p>Ajouter une route <code>/login</code> reliée à la view <code>LoginForm</code> et une route <code>/search</code> reliée à <code>SearchFilm</code>.</p></li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Par convention, on appelle les composants rattachés à des routes des <em>views</em>, et on les place généralement dans le dossier <code>src/views</code> plutôt que <code>src/components</code>.</p></div> <ol start="3"><li>Ajoutez à la configuration des routes des redirections vers la route <code>/search</code> pour la route par défaut (<code>/</code>) et pour toutes les autres routes non reconnues (<code>/:pathMatch(.*)*</code>) :</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">&quot;/search&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/:pathMatch(.*)*'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">&quot;/search&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li><p>A l'aide de la documentation de <a href="https://router.vuejs.org/api/" target="_blank" rel="noopener noreferrer">vue-router<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, remplacez la bascule entre <code>LoginForm</code> et <code>SearchFilm</code> à base de <code>v-if</code> par une navigation d'une route à une autre avec <code>&lt;router-view&gt;</code>.</p></li> <li><p>Naviguez programmatiquement vers la route <code>/search</code> après l'action de login, et vers la route <code>/login</code> après l'action de logout. Vérifiez que les transitions entre les pages et les changements d'URL fonctionnent correctement.</p></li> <li><p><strong>Bonus</strong> : en utilisant les <a href="https://router.vuejs.org/guide/advanced/navigation-guards.html" target="_blank" rel="noopener noreferrer">Navigation Guards<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> de vue-router, redirigez l'utilisateur voulant accéder à la page de recherche de films vers <code>/login</code> si l'utilisateur n'est pas authentifié.</p></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuejs-training/fr/etat/" class="prev">
        Gestion d'état
      </a></span> <span class="next"><a href="/vuejs-training/fr/http/">
        Requêtes HTTP
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuejs-training/assets/js/app.1ac87feb.js" defer></script><script src="/vuejs-training/assets/js/3.9c71ca5a.js" defer></script><script src="/vuejs-training/assets/js/36.8090ec62.js" defer></script>
  </body>
</html>
